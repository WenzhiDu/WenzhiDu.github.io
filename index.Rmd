---
title: "Intergenerational mobility of career path"
author: "Wenzhi Du"
date: "2019/12/20"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
source("GSS.r")
```

## Overview – does leaving family early increase independency of choosing careers?
Family bond builds up heritages, and in the meantime, it creates friction for social changes. The intergenerational mobility has been understood to play a central role in social fluidity. Consider the racial equality at workspace for example. Even if equal opportunity employers enforce racial-blind hiring process, equality remains hard to reach a satisfiable level. Among the many complicated social factors contribute to the difficulty of realizing truly equal opportunity, I would like to study the effect of family influence. 

In the past, lots of family lineage are bounded with specific jobs, making a strong force against social fluidity. As a contrast, modern education encourages and facilitates young people to pursue their own interest that may or may not be the same as their parents. Nevertheless, the family influence is still a considerable factor for people’s career choice. In this study I will try to quantify the correlation between children and parents’ industry sector, and explore if leaving home early can enhance the independency of the child to choose their own career. We also want to see if this correlation between parent and children is becoming stronger or weaker over the years. The answer to this project may help people finding ways to a more equal world. 


## Data
The data I use is extracted from GSS. We use following data:
Variables:

 YEAR     | Gss year for this respondent          
----------|---------------------------------------
 ID       | Respondent id number                  
 INDUS10  | Respondent industry code (naics 2007) 
 PAIND10  | Fathers industry code (naics 2007)    
 MAIND10  | Mothers industry code (naics 2007)    
 FAMILY16 | Living with parents when 16 yrs old   
 BALLOT   | Ballot used for interview             

Now we look at the variables. Firstly, notice that the number of observations in each year is different.

```{r, echo=FALSE}
GSS %>% group_by(YEAR) %>% tally() %>% ggplot(aes(x=YEAR, y=n)) + geom_line()
```

We will want to look at whether the respondents work in the same industry as their parents. The industry sector are coded with numbers. For the 64814 observations in total, about 300 different industry codes are included. The most common industry codes and frequency for the respondent, father and mother are respectively
```{r}
(GSS$INDUS10 %>% as.factor %>% summary)[1:10]
(GSS$PAIND10 %>% as.factor %>% summary)[1:10]
(GSS$MAIND10 %>% as.factor %>% summary)[1:10]
```

Notice that industry sector code 0 means not in any industry. A huge fraction of parents, especially mothers, are in this category. For our purpose we want to know if the children has the same industry as at least one of father and mother. So we construct a new field SAME_IND

```{r}
GSS$SAME_IND <- (GSS$INDUS10 == GSS$PAIND10) | (GSS$INDUS10 == GSS$MAIND10)
```

The histogram of this variable is

```{r}
GSS %>% select(SAME_IND) %>% ggplot(aes(x=SAME_IND)) + geom_histogram(stat = "count")
```

The data I want to use to predictors is whether the kid stay with family at the age of 16. The data have 10 levels of various combination. For simplicity we only consider the case of whether they are with at least one of direct parent. Hence we define
```{r}
GSS$WITH_PARENT = (GSS$FAMILY16 > 0) & (GSS$FAMILY16 <=5)
```

The histogram is 
```{r}
GSS %>% select(WITH_PARENT) %>% ggplot(aes(x=WITH_PARENT)) + geom_histogram(stat = "count")
```




## Analysis
To address the question about how strong the correlation between the parents' industry and children's industry, we will need a proxy to represent relation.  However, because the industry sector data have rather random coarse-graining level (that means some sector include more possibility of jobs for example), it does not make sense to give any absolute result of the strength of the correlation.  Nevertheless, it make sense to compare between different years, and between different conditions (leaving home at 16 years old or not) to see if one of the group has more likelihood for children to inherit their parents' career path. When doing the comparison, we can compare the fraction of observations in that SAME_IND is true. We call this fraction $p_i$ for situation $i$. Then we shall formulate following hypothesis to test.

### Q1: has there been more independency for children to choose their career, over the years?
$H_0: $ The independency for children to choose their career has not changed by year.
$H_a: $ There is a change.

To formulate it as a question to be answered with regression, we can say, if we ansatz a modell

$p_{SAME\_IND} = \beta_0 + \beta_1 YEAR$, then

$H_0: \beta_1 = 0$, $H_a: \beta_1 \ne 0$.


### Q2: does leaving home early
